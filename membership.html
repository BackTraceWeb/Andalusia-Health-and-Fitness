<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Join Today — Andalusia Health & Fitness</title>
  <link rel="stylesheet" href="styles.css"/>
  <style>
    body { background:#000; color:#fff; font-family:"Helvetica Neue", Arial, sans-serif; margin:0; }

    /* Make hero image visible */
    .hero.hero--photo::before {
      content:"";
      position:absolute;
      inset:0;
      background:rgba(0,0,0,0.3); /* lighter overlay for visibility */
    }

    .plan-grid {
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
      gap:20px;
      margin-top:20px;
    }

    .plan {
      background:#111;
      border:2px solid #d81b60;
      border-radius:12px;
      padding:20px;
      cursor:pointer;
      color:#fff;
      transition:transform 0.2s, box-shadow 0.2s;
      display:block;
    }

    .plan:hover {
      transform:translateY(-3px);
      box-shadow:0 0 15px rgba(216,27,96,0.4);
    }

    .plan input { display:none; }
    .plan-body strong { font-size:1.2em; display:block; margin-bottom:4px; color:#fff; }
    .plan-body span.muted { color:#bbb; font-size:0.9em; }

    input[type="text"], input[type="email"], input[type="number"], select {
      width:100%;
      padding:10px;
      border:1px solid #000;
      border-radius:8px;
      background:#fff;
      color:#000;
    }

    label { color:#000; font-weight:600; display:block; margin-bottom:6px; }
    .fieldset { background:#fff; border-radius:12px; padding:20px; margin-top:20px; color:#000; }

    .calc {
      background:#111;
      color:#fff;
      border:1px solid #d81b60;
      border-radius:12px;
      padding:20px;
      margin-top:20px;
    }

    .calc label { color:#fff; }

    .totals { display:grid; gap:6px; margin-top:10px; }
    .totals .line { display:flex; justify-content:space-between; }
    .totals .big { font-weight:bold; color:#d81b60; }

    .pill-cta {
      background:#d81b60;
      border:none;
      padding:10px 18px;
      color:#fff;
      border-radius:999px;
      font-weight:bold;
      cursor:pointer;
      transition:background 0.2s;
    }

    .pill-cta:hover { background:#ff4fa3; }

    .pill-ghost {
      background:transparent;
      border:1px solid #d81b60;
      color:#fff;
      border-radius:999px;
      padding:12px 20px;
      cursor:pointer;
      font-weight:600;
      margin-left:10px;
      white-space:nowrap;
    }

    .toggle { display:flex; align-items:center; gap:8px; cursor:pointer; }
    .toggle input { width:18px; height:18px; }

    .help { font-size:0.85em; color:#aaa; }
  </style>
</head>

<body class="theme-andalusia">

<!-- Topbar -->
<div class="topbar">
  <div class="shell">
    <div class="brand-pill">
      <a href="index.html"><img src="AHFlogo.png" alt="Andalusia Health & Fitness"></a>
    </div>
    <nav class="mainnav">
      <a href="index.html">Home</a>
      <a href="pricing.html">Pricing</a>
      <a href="https://maps.google.com/?q=205+Church+St,+Andalusia,+AL+36420" target="_blank" rel="noopener">Location</a>
    </nav>
  </div>
</div>

<!-- CTA -->
<div class="ctabar">
  <div class="shell">
    <a href="/quickpay/" class="pill-cta">Quick Pay</a>
    <a href="tel:+13345822000" class="pill-cta">Call • (334) 582-2000</a>
  </div>
</div>

<!-- HERO -->
<section class="hero hero--photo">
  <div class="overlay"></div>
  <div class="shell">
    <div class="hero-copy">
      <h1>Join Today</h1>
      <p class="lede">24/7 access, sauna included, and flexible memberships.</p>
    </div>
  </div>
</section>

<!-- MAIN FORM -->
<main class="section">
  <div class="shell">
    <form id="membershipForm" class="form-card" method="GET" action="payments.html">

      <fieldset class="fieldset">
        <legend>Choose Your Membership</legend>
        <div class="plan-grid">
          <label class="plan"><input type="radio" name="plan" value="Single|35" required>
            <div class="plan-body"><strong>Single</strong><span class="muted">$35.00 / month</span></div></label>

          <label class="plan"><input type="radio" name="plan" value="Couples (married)|55">
            <div class="plan-body"><strong>Couples (married)</strong><span class="muted">$55.00 / month</span></div></label>

          <label class="plan"><input type="radio" name="plan" value="Family|65">
            <div class="plan-body"><strong>Family</strong><span class="muted">$65.00 / month</span><span class="muted"><small>Includes spouse + 1 child · $10/mo per additional child (up to 6 total)</small></span></div></label>

          <label class="plan"><input type="radio" name="plan" value="Senior (65+)|25">
            <div class="plan-body"><strong>Senior (65+)</strong><span class="muted">$25.00 / month</span></div></label>

          <label class="plan"><input type="radio" name="plan" value="Student|30">
            <div class="plan-body"><strong>Student</strong><span class="muted">$30.00 / month</span></div></label>

          <label class="plan"><input type="radio" name="plan" value="Tanning Only (no gym)|45">
            <div class="plan-body"><strong>Tanning Only</strong><span class="muted">$45.00 / month · no gym access</span></div></label>
        </div>

        <div class="calc">
          <div class="row"><label class="toggle"><input type="checkbox" id="addTanning"><span>Add Tanning (gym add-on) — $27.50 / month</span></label></div>

          <div class="row" id="familyCountsRow" style="display:none;">
            <label>Additional Family Members
              <input type="number" id="extraMembers" min="0" value="0" max="3">
            </label>
            <span class="help">Base includes 2 adults + 1 child. $10 per extra member (up to 6 total).</span>
          </div>

          <div class="row" id="accessRow">
            <label>24/7 Access Keys (fobs) @ $15.00 each <input type="number" id="fobCount" min="1" value="1"></label>
            <label class="toggle"><input type="checkbox" id="waiveInitiation"><span>Waive $20 initiation (draft signup)</span></label>
          </div>

          <div class="row" style="align-items:center; display:flex; gap:10px; flex-wrap:wrap;">
            <div>
              <label>Waivers needed</label>
              <input type="number" id="waiverCount" min="1" value="1" readonly style="width:70px; text-align:center;">
            </div>
            <button type="button" id="launchWizard" class="pill-ghost">Fill Waivers Now</button>
            <span class="help" id="waiverStatus">0 / 1 completed</span>
          </div>

          <div class="totals">
            <div class="line"><span>Monthly dues</span><span id="monthlyPlan">$0.00</span></div>
            <div class="line"><span>Monthly add-ons</span><span id="monthlyAddons">$0.00</span></div>
            <div class="line"><span>Initiation fee</span><span id="initiationLine">$20.00</span></div>
            <div class="line"><span>24/7 key(s)</span><span id="fobsLine">$15.00</span></div>
            <div class="line big"><span>Today’s total</span><span id="todayTotal">$0.00</span></div>
          </div>
        </div>
      </fieldset>

      <fieldset class="fieldset">
        <legend>Primary Member</legend>
        <div class="grid-3">
          <label>First Name <input required name="first_name"></label>
          <label>Last Name <input required name="last_name"></label>
          <label>Phone <input required name="phone"></label>
          <label>Email <input required type="email" name="email"></label>
          <label>Address 1 <input name="address1"></label>
          <label>City <input name="city"></label>
          <label>State <input name="state"></label>
          <label>ZIP <input name="zip"></label>
        </div>
        <p class="help" style="color:#000;margin-top:10px;">Primary member must bring a valid driver’s license when picking up key fobs.</p>
      </fieldset>

      <fieldset class="fieldset">
        <legend>Membership Agreement & Liability Waiver</legend>
        <label class="agree"><input type="checkbox" id="agree" required> <span>I confirm all required waivers will be signed and are accurate.</span></label>
      </fieldset>

      <div class="form-actions">
        <button class="pill-cta" type="submit">Continue to Payment</button>
      </div>
    </form>
  </div>
</main>

<footer class="sitefoot">
  © <script>document.write(new Date().getFullYear())</script> Andalusia Health & Fitness — Open 24/7.
</footer>

<script>
(function(){
  const INIT_FEE=20,FOB_FEE=15,TANNING_ADDON=27.5,EXTRA_CHILD_FEE=10;
  const form=document.getElementById('membershipForm'),
        addTanning=document.getElementById('addTanning'),
        fobCount=document.getElementById('fobCount'),
        waiveInit=document.getElementById('waiveInitiation'),
        extraMembers=document.getElementById('extraMembers'),
        familyRow=document.getElementById('familyCountsRow'),
        monthlyPlanEl=document.getElementById('monthlyPlan'),
        monthlyAddEl=document.getElementById('monthlyAddons'),
        initEl=document.getElementById('initiationLine'),
        fobEl=document.getElementById('fobsLine'),
        todayEl=document.getElementById('todayTotal'),
        waiverCount=document.getElementById('waiverCount'),
        launchBtn=document.getElementById('launchWizard');

  let waiverEntries=[];

  function parsePlan(){
    const sel=form.querySelector('input[name="plan"]:checked');
    if(!sel)return{name:'',amount:0};
    const[n,a]=sel.value.split('|');
    return{name:n,amount:parseFloat(a)};
  }

  function recalc(){
    const plan=parsePlan();
    const isFamily=plan.name.toLowerCase().includes('family');
    const isCouple=plan.name.toLowerCase().includes('couple');
    familyRow.style.display=isFamily?'block':'none';

    let addons=0;
    if(addTanning.checked)addons+=TANNING_ADDON;
    if(isFamily){
      const extras=Math.max(0,parseInt(extraMembers.value||'0',10));
      if(extras>0)addons+=extras*EXTRA_CHILD_FEE;
    }

    let waiverTotal=1;
    if(isCouple)waiverTotal=2;
    else if(isFamily)waiverTotal=3+Math.max(0,parseInt(extraMembers.value||'0',10));
    waiverCount.value=waiverTotal;

    const init=waiveInit.checked?0:INIT_FEE;
    const fobs=parseInt(fobCount.value||'0',10)*FOB_FEE;
    const today=init+fobs;
    const totalMonthly=plan.amount+addons;

    monthlyPlanEl.textContent='$'+plan.amount.toFixed(2);
    monthlyAddEl.textContent='$'+addons.toFixed(2);
    initEl.textContent='$'+init.toFixed(2);
    fobEl.textContent='$'+fobs.toFixed(2);
    todayEl.textContent='$'+today.toFixed(2);
  }

  form.addEventListener('change',recalc);
  recalc();

  // === Waiver Launcher ===
  launchBtn.addEventListener('click',()=>{
    const total=parseInt(waiverCount.value||'1',10);
    for(let i=0;i<total;i++){
      const url=`waiver.html?i=${i}&total=${total}`;
      window.open(url,'_blank');
    }
  });
})();
</script>
</body>
</html>
